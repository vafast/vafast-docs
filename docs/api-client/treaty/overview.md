---
title: ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æ¦‚è¿° - Vafast
head:
  - - meta
    - property: 'og:title'
      content: ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æ¦‚è¿° - Vafast

  - - meta
    - name: 'description'
      content: Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æä¾›äº†å®Œæ•´çš„ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œè®©æ‚¨èƒ½å¤Ÿä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼ä¸ Vafast æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚

  - - meta
    - property: 'og:description'
      content: Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æä¾›äº†å®Œæ•´çš„ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œè®©æ‚¨èƒ½å¤Ÿä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼ä¸ Vafast æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚
---

# ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æ¦‚è¿°

Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œè®©æ‚¨èƒ½å¤Ÿä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼ä¸ Vafast æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚é€šè¿‡åˆ©ç”¨ TypeScript çš„ç±»å‹ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ•è·ç±»å‹é”™è¯¯ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ”’ ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
- æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„å®Œå…¨ç±»å‹åŒæ­¥
- ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- è‡ªåŠ¨ç±»å‹æ¨æ–­å’Œæ™ºèƒ½æç¤º

### ğŸ¯ é›¶ä»£ç ç”Ÿæˆ
- æ— éœ€é¢å¤–çš„ä»£ç ç”Ÿæˆæ­¥éª¤
- ç›´æ¥ä½¿ç”¨ TypeScript ç±»å‹ç³»ç»Ÿ
- å®æ—¶ç±»å‹åŒæ­¥

### ğŸš€ é«˜æ€§èƒ½
- è½»é‡çº§å®ç°ï¼Œä½“ç§¯å°
- å¿«é€Ÿçš„ç±»å‹æ¨æ–­
- ä¼˜åŒ–çš„è¿è¡Œæ—¶æ€§èƒ½

### ğŸ§© æ˜“äºé›†æˆ
- ä¸ç°æœ‰ Vafast é¡¹ç›®æ— ç¼é›†æˆ
- æ”¯æŒæ‰€æœ‰ Vafast åŠŸèƒ½
- çµæ´»çš„é…ç½®é€‰é¡¹

## ğŸ—ï¸ æ¶æ„è®¾è®¡

Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯é‡‡ç”¨æ™ºèƒ½çš„ç±»å‹æ¨æ–­æœºåˆ¶ï¼Œé€šè¿‡åˆ†æ Vafast æœåŠ¡å™¨çš„ç±»å‹å®šä¹‰ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å®¢æˆ·ç«¯ç±»å‹ã€‚è¿™ç§è®¾è®¡ç¡®ä¿äº†ï¼š

```
Vafast æœåŠ¡å™¨ç±»å‹å®šä¹‰
         â†“
   ç±»å‹å®‰å…¨å®¢æˆ·ç«¯
         â†“
   ç±»å‹åŒ–çš„ API è°ƒç”¨
         â†“
   ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
```

### ç±»å‹æ¨æ–­æµç¨‹

1. **æœåŠ¡å™¨ç±»å‹å¯¼å‡º** - ä» Vafast æœåŠ¡å™¨å¯¼å‡ºç±»å‹å®šä¹‰
2. **å®¢æˆ·ç«¯ç±»å‹ç”Ÿæˆ** - è‡ªåŠ¨æ¨æ–­å®¢æˆ·ç«¯å¯ç”¨çš„ç±»å‹
3. **API è°ƒç”¨éªŒè¯** - åœ¨ç¼–è¯‘æ—¶éªŒè¯ API è°ƒç”¨çš„æ­£ç¡®æ€§
4. **è¿è¡Œæ—¶ç±»å‹å®‰å…¨** - ç¡®ä¿è¿è¡Œæ—¶æ•°æ®çš„ç±»å‹ä¸€è‡´æ€§

## ğŸ”§ æ ¸å¿ƒæ¦‚å¿µ

### ç±»å‹å®‰å…¨
ç±»å‹å®‰å…¨æ˜¯æŒ‡åœ¨ç¼–è¯‘æ—¶èƒ½å¤Ÿæ£€æµ‹åˆ°ç±»å‹é”™è¯¯ï¼Œé¿å…åœ¨è¿è¡Œæ—¶å‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ç±»å‹å®‰å…¨ï¼š

- **è¯·æ±‚å‚æ•°ç±»å‹æ£€æŸ¥** - éªŒè¯è¯·æ±‚å‚æ•°çš„ç±»å‹å’Œç»“æ„
- **å“åº”æ•°æ®ç±»å‹æ¨æ–­** - è‡ªåŠ¨æ¨æ–­å“åº”çš„æ•°æ®ç±»å‹
- **è·¯å¾„å‚æ•°ç±»å‹éªŒè¯** - ç¡®ä¿è·¯å¾„å‚æ•°çš„ç±»å‹æ­£ç¡®æ€§
- **æŸ¥è¯¢å‚æ•°ç±»å‹æ£€æŸ¥** - éªŒè¯æŸ¥è¯¢å‚æ•°çš„ç±»å‹

### ç«¯åˆ°ç«¯ç±»å‹åŒæ­¥
ç«¯åˆ°ç«¯ç±»å‹åŒæ­¥æ„å‘³ç€æœåŠ¡å™¨ç«¯çš„ç±»å‹å®šä¹‰ä¼šè‡ªåŠ¨åŒæ­¥åˆ°å®¢æˆ·ç«¯ï¼Œå½“æœåŠ¡å™¨ç«¯çš„ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šç«‹å³è·å¾—ç›¸åº”çš„ç±»å‹æ›´æ–°ã€‚è¿™ç¡®ä¿äº†ï¼š

- **ç±»å‹ä¸€è‡´æ€§** - æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ç±»å‹å§‹ç»ˆä¿æŒä¸€è‡´
- **è‡ªåŠ¨æ›´æ–°** - æ— éœ€æ‰‹åŠ¨åŒæ­¥ç±»å‹å®šä¹‰
- **é”™è¯¯é¢„é˜²** - åœ¨ç¼–è¯‘æ—¶æ•è·ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜

### é›¶ä»£ç ç”Ÿæˆ
é›¶ä»£ç ç”Ÿæˆæ„å‘³ç€æ‚¨ä¸éœ€è¦è¿è¡Œé¢å¤–çš„å·¥å…·æ¥ç”Ÿæˆç±»å‹å®šä¹‰ï¼Œæ‰€æœ‰çš„ç±»å‹æ¨æ–­éƒ½åœ¨ TypeScript ç¼–è¯‘æ—¶å®Œæˆã€‚è¿™å¸¦æ¥äº†ï¼š

- **å¼€å‘æ•ˆç‡** - æ— éœ€ç­‰å¾…ä»£ç ç”Ÿæˆ
- **ç±»å‹å‡†ç¡®æ€§** - ç±»å‹å®šä¹‰å§‹ç»ˆæ˜¯æœ€æ–°çš„
- **ç»´æŠ¤ç®€å•** - å‡å°‘äº†é¢å¤–çš„æ„å»ºæ­¥éª¤

## ğŸ“± ä½¿ç”¨åœºæ™¯

### å‰ç«¯åº”ç”¨
- **React åº”ç”¨** - ç±»å‹å®‰å…¨çš„ API è°ƒç”¨
- **Vue åº”ç”¨** - å®Œæ•´çš„ç±»å‹æ”¯æŒ
- **Angular åº”ç”¨** - å¼ºç±»å‹çš„æ•°æ®ç»‘å®š
- **Svelte åº”ç”¨** - ç±»å‹å®‰å…¨çš„ç»„ä»¶é€šä¿¡

### åç«¯æœåŠ¡
- **å¾®æœåŠ¡é€šä¿¡** - ç±»å‹å®‰å…¨çš„æœåŠ¡é—´è°ƒç”¨
- **API ç½‘å…³** - ç»Ÿä¸€çš„ç±»å‹å®šä¹‰
- **æ•°æ®åŒæ­¥** - ç±»å‹ä¸€è‡´çš„æ•°æ®ä¼ è¾“

### ç§»åŠ¨åº”ç”¨
- **React Native** - è·¨å¹³å°çš„ç±»å‹å®‰å…¨
- **Flutter** - é€šè¿‡ FFI å®ç°ç±»å‹å®‰å…¨
- **åŸç”Ÿåº”ç”¨** - ç±»å‹å®‰å…¨çš„ç½‘ç»œå±‚

### æ¡Œé¢åº”ç”¨
- **Electron** - ç±»å‹å®‰å…¨çš„ IPC é€šä¿¡
- **Tauri** - ç±»å‹å®‰å…¨çš„åç«¯è°ƒç”¨
- **åŸç”Ÿåº”ç”¨** - ç±»å‹å®‰å…¨çš„ç½‘ç»œè¯·æ±‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯¼å‡ºæœåŠ¡å™¨ç±»å‹

```typescript
// server.ts
import { Server, defineRoutes, createRouteHandler } from 'vafast'
import { Type } from '@sinclair/typebox'

const routes = defineRoutes([
  {
    method: 'GET',
    path: '/',
    handler: createRouteHandler(() => 'Hello Vafast!')
  },
  {
    method: 'GET',
    path: '/users/:id',
    handler: createRouteHandler(({ params }) => `User ${params.id}`),
    params: Type.Object({
      id: Type.String()
    })
  },
  {
    method: 'POST',
    path: '/users',
    handler: createRouteHandler(({ body }) => `Created user: ${body.name}`),
    body: Type.Object({
      name: Type.String(),
      email: Type.String()
    })
  }
])

const server = new Server(routes)

// å¯¼å‡ºæœåŠ¡å™¨ç±»å‹
export type App = typeof server
export default { fetch: server.fetch }
```

### 2. åˆ›å»ºç±»å‹å®‰å…¨å®¢æˆ·ç«¯

```typescript
// client.ts
import { createTypedClient } from '@vafast/api-client'
import type { App } from './server'

// åˆ›å»ºç±»å‹å®‰å…¨å®¢æˆ·ç«¯
const client = createTypedClient<App>('http://localhost:3000')

export default client
```

### 3. ä½¿ç”¨ç±»å‹å®‰å…¨å®¢æˆ·ç«¯

```typescript
// index.ts
import client from './client'

async function main() {
  try {
    // ç±»å‹å®‰å…¨çš„ GET è¯·æ±‚
    const homeResponse = await client.get('/')
    console.log('Home:', homeResponse.data) // ç±»å‹: string
    
    // ç±»å‹å®‰å…¨çš„è·¯å¾„å‚æ•°
    const userResponse = await client.get('/users/:id', { id: '123' })
    console.log('User:', userResponse.data) // ç±»å‹: string
    
    // ç±»å‹å®‰å…¨çš„ POST è¯·æ±‚
    const createResponse = await client.post('/users', {
      name: 'John Doe',
      email: 'john@example.com'
    })
    console.log('Created:', createResponse.data) // ç±»å‹: string
    
  } catch (error) {
    console.error('Error:', error)
  }
}

main()
```

## ğŸ” ç±»å‹æ¨æ–­ç¤ºä¾‹

### è‡ªåŠ¨ç±»å‹æ¨æ–­

```typescript
// æœåŠ¡å™¨ç«¯ç±»å‹å®šä¹‰
interface User {
  id: string
  name: string
  email: string
  profile: {
    age: number
    location: string
  }
}

// å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—ç±»å‹æ¨æ–­
const user = await client.get('/users/:id', { id: '123' })
// user.data çš„ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º User

// å®Œæ•´çš„ç±»å‹æ”¯æŒ
console.log(user.data.name) // âœ… ç±»å‹å®‰å…¨
console.log(user.data.profile.age) // âœ… ç±»å‹å®‰å…¨
console.log(user.data.invalid) // âŒ ç¼–è¯‘æ—¶é”™è¯¯
```

### å‚æ•°ç±»å‹éªŒè¯

```typescript
// æœåŠ¡å™¨ç«¯éªŒè¯å™¨
const userValidator = Type.Object({
  name: Type.String({ minLength: 1 }),
  email: Type.String({ format: 'email' }),
  age: Type.Number({ minimum: 0, maximum: 150 })
})

// å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—ç±»å‹ä¿¡æ¯
const response = await client.post('/users', {
  name: 'John', // âœ… ç±»å‹æ­£ç¡®
  email: 'john@example.com', // âœ… ç±»å‹æ­£ç¡®
  age: 30 // âœ… ç±»å‹æ­£ç¡®
})

// ç±»å‹é”™è¯¯ä¼šåœ¨ç¼–è¯‘æ—¶è¢«æ•è·
const invalidResponse = await client.post('/users', {
  name: 123, // âŒ ç¼–è¯‘æ—¶é”™è¯¯ï¼šåº”è¯¥æ˜¯ string
  email: 'invalid-email', // âŒ ç¼–è¯‘æ—¶é”™è¯¯ï¼šæ ¼å¼ä¸æ­£ç¡®
  age: 'thirty' // âŒ ç¼–è¯‘æ—¶é”™è¯¯ï¼šåº”è¯¥æ˜¯ number
})
```

## ğŸ›ï¸ é«˜çº§åŠŸèƒ½

### ä¸­é—´ä»¶ç±»å‹æ”¯æŒ

```typescript
// æœåŠ¡å™¨ç«¯ä¸­é—´ä»¶
const authMiddleware = createMiddleware(async (request, next) => {
  const token = request.headers.get('Authorization')
  if (!token) {
    throw new Error('Unauthorized')
  }
  return await next(request)
})

// å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—ä¸­é—´ä»¶ç±»å‹
const response = await client.get('/protected', {}, {
  headers: {
    'Authorization': 'Bearer token123' // âœ… ç±»å‹å®‰å…¨
  }
})
```

### é”™è¯¯ç±»å‹æ¨æ–­

```typescript
// æœåŠ¡å™¨ç«¯é”™è¯¯ç±»å‹
interface ApiError {
  code: string
  message: string
  details?: any
}

// å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—é”™è¯¯ç±»å‹
const response = await client.get('/users/:id', { id: 'invalid' })

if (response.error) {
  // response.error çš„ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º ApiError
  console.log(response.error.code) // âœ… ç±»å‹å®‰å…¨
  console.log(response.error.message) // âœ… ç±»å‹å®‰å…¨
  console.log(response.error.details) // âœ… ç±»å‹å®‰å…¨
}
```

### å“åº”ç±»å‹æ¨æ–­

```typescript
// æœåŠ¡å™¨ç«¯å“åº”ç±»å‹
interface PaginatedResponse<T> {
  data: T[]
  total: number
  page: number
  limit: number
}

// å®¢æˆ·ç«¯è‡ªåŠ¨è·å¾—å“åº”ç±»å‹
const response = await client.get('/users', { page: 1, limit: 10 })

// response.data çš„ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º PaginatedResponse<User>
console.log(response.data.total) // âœ… ç±»å‹å®‰å…¨
console.log(response.data.data[0].name) // âœ… ç±»å‹å®‰å…¨
```

## ğŸ”— ä¸å…¶ä»–å·¥å…·é›†æˆ

### TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "exactOptionalPropertyTypes": true
  }
}
```

### ESLint é…ç½®

```javascript
// .eslintrc.js
module.exports = {
  extends: [
    '@typescript-eslint/recommended',
    '@typescript-eslint/recommended-requiring-type-checking'
  ],
  parserOptions: {
    project: './tsconfig.json'
  }
}
```

### VSCode é…ç½®

```json
// .vscode/settings.json
{
  "typescript.preferences.includePackageJsonAutoImports": "on",
  "typescript.suggest.autoImports": true,
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

## ğŸ“š æœ€ä½³å®è·µ

### 1. ç±»å‹å®šä¹‰ç»„ç»‡
- å°†ç±»å‹å®šä¹‰æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­
- ä½¿ç”¨å‘½åç©ºé—´ç»„ç»‡ç›¸å…³ç±»å‹
- å¯¼å‡ºæ‰€æœ‰å¿…è¦çš„ç±»å‹

### 2. éªŒè¯å™¨è®¾è®¡
- ä½¿ç”¨ TypeBox åˆ›å»ºä¸¥æ ¼çš„éªŒè¯å™¨
- ä¸ºæ‰€æœ‰è¾“å…¥å‚æ•°å®šä¹‰éªŒè¯è§„åˆ™
- æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯

### 3. é”™è¯¯å¤„ç†
- å®šä¹‰ç»Ÿä¸€çš„é”™è¯¯ç±»å‹
- åœ¨å®¢æˆ·ç«¯å¤„ç†æ‰€æœ‰å¯èƒ½çš„é”™è¯¯
- æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

### 4. æ€§èƒ½ä¼˜åŒ–
- é¿å…ä¸å¿…è¦çš„ç±»å‹æ£€æŸ¥
- ä½¿ç”¨ç±»å‹ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
- ä¼˜åŒ–å¤§å‹ç±»å‹å®šä¹‰çš„æ€§èƒ½

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç±»å‹æ¨æ–­å¤±è´¥
```typescript
// ç¡®ä¿æœåŠ¡å™¨ç±»å‹æ­£ç¡®å¯¼å‡º
export type App = typeof server

// ç¡®ä¿å®¢æˆ·ç«¯æ­£ç¡®å¯¼å…¥ç±»å‹
import type { App } from './server'
```

#### 2. ç±»å‹ä¸åŒ¹é…
```typescript
// æ£€æŸ¥æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ç±»å‹å®šä¹‰
// ç¡®ä¿å®ƒä»¬ä½¿ç”¨ç›¸åŒçš„ç±»å‹åº“ç‰ˆæœ¬
```

#### 3. ç¼–è¯‘æ€§èƒ½é—®é¢˜
```typescript
// ä½¿ç”¨ç±»å‹ç¼“å­˜
// é¿å…è¿‡å¤§çš„ç±»å‹å®šä¹‰
// ä½¿ç”¨ç±»å‹åˆ«åç®€åŒ–å¤æ‚ç±»å‹
```

## ğŸ“š ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å·²ç»äº†è§£äº† Vafast ç±»å‹å®‰å…¨å®¢æˆ·ç«¯çš„åŸºæœ¬æ¦‚å¿µï¼Œæ¥ä¸‹æ¥å¯ä»¥ï¼š

1. **å­¦ä¹ å…·ä½“ç”¨æ³•** - äº†è§£å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ç±»å‹å®‰å…¨å®¢æˆ·ç«¯
2. **æ¢ç´¢é«˜çº§ç‰¹æ€§** - å­¦ä¹ ä¸­é—´ä»¶ã€é”™è¯¯å¤„ç†ç­‰é«˜çº§åŠŸèƒ½
3. **é›†æˆåˆ°é¡¹ç›®** - å°†ç±»å‹å®‰å…¨å®¢æˆ·ç«¯é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­
4. **æ€§èƒ½ä¼˜åŒ–** - å­¦ä¹ å¦‚ä½•ä¼˜åŒ–ç±»å‹æ¨æ–­çš„æ€§èƒ½
5. **æœ€ä½³å®è·µ** - äº†è§£æ›´å¤šçš„ä½¿ç”¨æŠ€å·§å’Œæœ€ä½³å®è·µ

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„ [GitHub ä»“åº“](https://github.com/vafast/vafast) æˆ– [ç¤¾åŒºé¡µé¢](/community)ã€‚
